<UserControl x:Class="K19GameLibrary.ShipTorpedoGame"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="400" d:DesignWidth="600">

    <Grid>
        <!-- Вид из перископа -->
        <Canvas x:Name="periscopeView" 
                HorizontalAlignment="Center" VerticalAlignment="Center"
                Width="200" Height="200" 
                Background="#80000000"
                MouseLeftButtonDown="PeriscopeView_MouseLeftButtonDown">

            <!-- Круг перископа -->
            <Ellipse Width="180" Height="180" Stroke="Green" StrokeThickness="2"
                   Canvas.Left="10" Canvas.Top="10"/>

            <!-- Перекрестие прицела -->
            <Line X1="100" Y1="20" X2="100" Y2="180" Stroke="Red" StrokeThickness="1"/>
            <Line X1="20" Y1="100" X2="180" Y2="100" Stroke="Red" StrokeThickness="1"/>

            <!-- Корабль в перископе -->
            <Path x:Name="shipElement" Data="M0,0 L15,0 L12.5,-5 L2.5,-5 Z" Fill="White" 
                  Canvas.Left="{Binding ShipPeriscopeX}" Canvas.Top="{Binding ShipPeriscopeY}">
                <Path.Style>
                    <Style TargetType="Path">
                        <Setter Property="Visibility" Value="Visible"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding ShipVisible}" Value="False">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Path.Style>
                <Path.RenderTransform>
                    <TranslateTransform X="-7.5" Y="2.5"/>
                </Path.RenderTransform>
            </Path>

            <!-- Торпеда в перископе -->
            <Ellipse x:Name="torpedoElement" Width="5" Height="2.5" Fill="White"
                   Canvas.Left="{Binding TorpedoPeriscopeX}" Canvas.Top="{Binding TorpedoPeriscopeY}">
                <Ellipse.Style>
                    <Style TargetType="Ellipse">
                        <Setter Property="Visibility" Value="Visible"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding TorpedoLaunched}" Value="False">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Ellipse.Style>
                <Ellipse.RenderTransform>
                    <TranslateTransform X="-2.5" Y="-1.25"/>
                </Ellipse.RenderTransform>
            </Ellipse>

            <!-- Взрыв в перископе -->
            <Ellipse x:Name="explosion" Width="20" Height="20" Fill="Yellow" Opacity="0"
                   Canvas.Left="{Binding ExplosionPeriscopeX}" Canvas.Top="{Binding ExplosionPeriscopeY}">
                <Ellipse.RenderTransform>
                    <TranslateTransform X="-10" Y="-10"/>
                </Ellipse.RenderTransform>
            </Ellipse>

            <!-- Надпись ПЕРИСКОП -->
            <TextBlock Text="ПЕРИСКОП" Foreground="Green" FontWeight="Bold"
                     Canvas.Left="60" Canvas.Top="5" FontSize="10"/>
        </Canvas>
    </Grid>
</UserControl>